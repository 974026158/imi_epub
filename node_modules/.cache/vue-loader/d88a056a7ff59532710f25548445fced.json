{"remainingRequest":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\views\\book.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\views\\book.vue","mtime":1577090083714},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEltYWdlICxUYWIsIFRhYnMsTG9hZGluZyxOYXZCYXIgLENlbGxHcm91cCxDZWxsLENhcmQsUmFkaW9Hcm91cCxSYWRpbyxQb3B1cCxQcm9ncmVzcywgUm93LCBDb2wsU2xpZGVyLFN0ZXBwZXIgICAgfSBmcm9tICd2YW50JzsKaW1wb3J0ICBtZW51IGZyb20gJ0AvY29tcG9uZW50cy9tZW51JzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgRXB1YiBmcm9tICdlcHVianMnOwoKClZ1ZS51c2UoTmF2QmFyICkudXNlKExvYWRpbmcgKS51c2UoQ2FyZCkKICAgIC51c2UoUmFkaW9Hcm91cCkudXNlKFJhZGlvKS51c2UoQ2VsbEdyb3VwKQogICAgLnVzZShDZWxsKS51c2UoVGFicykudXNlKFRhYikudXNlKFBvcHVwICkudXNlKFByb2dyZXNzKQogICAgLnVzZSggUm93KS51c2UoIENvbCApLnVzZShTbGlkZXIpLnVzZShTdGVwcGVyKS51c2UoSW1hZ2UpOwoKdmFyIGJvb2sscmVuZGl0aW9uOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2Jvb2snLAogICAgY29tcG9uZW50czp7CiAgICAgICAgbWVudTptZW51CiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHB1YmxpY1BhdGg6cHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgICAgICAgIGJvb2s6bnVsbCwKICAgICAgICAgICAgcmVuZGl0aW9uOm51bGwsCiAgICAgICAgICAgIGNoYXB0ZXI6e30sCiAgICAgICAgICAgIGNoYW5nZVR5cGU6Im1lbnUiLAogICAgICAgICAgICBmaXJzdExvYWQ6dHJ1ZSwKICAgICAgICAgICAgbG9hZGluZzp0cnVlLAogICAgICAgICAgICBwb3B1cFNob3c6ZmFsc2UsCiAgICAgICAgICAgIHNob3dMZWZ0RHJhd2VyOmZhbHNlLAogICAgICAgICAgICBsaWdodDoxMDAsCiAgICAgICAgICAgIGZvbnRTaXplOjE0LAogICAgICAgICAgICBiYWNrSW1hZ2U6IiIsCiAgICAgICAgICAgIHRvYzpbXSwKICAgICAgICAgICAgYmFja0ltYWdlTGlzdDpbCiAgICAgICAgICAgICAgICB7Y2xhc3M6ImJnLXRpbWciLGJhY2tJbWFnZXNyYzoicmVhZGVySW1hZ2VzL3RpbWdfYmlnLmpwZyJ9LAogICAgICAgICAgICAgICAge2NsYXNzOiJiZy10aW1nMSIsYmFja0ltYWdlc3JjOiJyZWFkZXJJbWFnZXMvdGltZzFfYmlnLmpwZyJ9LAogICAgICAgICAgICAgICAge2NsYXNzOiJiZy10aW1nMyIsYmFja0ltYWdlc3JjOiJyZWFkZXJJbWFnZXMvdGltZzNfYmlnLmpwZyJ9LAogICAgICAgICAgICAgICAge2NsYXNzOiJiZy10aW1nNCIsYmFja0ltYWdlc3JjOiIifSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgcmVhZGVyU3R5bGU6ewogICAgICAgICAgICAgICAgbGlnaHQ6MTAwLAogICAgICAgICAgICAgICAgZm9udFNpemU6MTQsCiAgICAgICAgICAgICAgICBiYWNrSW1hZ2U6IiIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDp7CiAgICAgICAgY2hhcHRlcjpmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIGlmKHRoaXMuY2hhbmdlVHlwZT09Im1lbnUiKQogICAgICAgICAgICAgICAgcmVuZGl0aW9uLmRpc3BsYXkodmFsLmhyZWYpOwogICAgICAgIH0sCiAgICAgICAgZm9udFNpemU6ZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICB0aGlzLm9uRm9udFNpemVDaGFuZ2UodmFsKTsKICAgICAgICB9LAogICAgICAgIGxpZ2h0OmZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICB0aGlzLm9uTGlnaHRDaGFuZ2UodmFsKTsKICAgICAgICB9LAogICAgICAgIGJhY2tJbWFnZTpmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgdGhpcy5vbkJhY2tJbWFnZUNoYW5nZSh2YWwpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBvbkNsaWNrTGVmdCgpIHsKICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygtMSk7CiAgICAgICAgICAgIC8vIGJvb2sKICAgICAgICB9LAogICAgICAgIG9uQ2xpY2tSaWdodCgpIHsKICAgICAgICAgICAgdGhpcy5zaG93TGVmdERyYXdlcj10cnVlOwogICAgICAgIH0sCiAgICAgICAgb25MaWdodENoYW5nZSh2YWwpewogICAgICAgICAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZWFkZXItb3ZlcmxheSIpOwogICAgICAgICAgICBvdmVybGF5LnN0eWxlLmJhY2tncm91bmRDb2xvcj0icmdiYSgwLDAsMCwiKygwLjUtdmFsLzIwMCkrIikiOwogICAgICAgICAgICB0aGlzLnJlYWRlclN0eWxlLmxpZ2h0PXZhbDsKICAgICAgICB9LAogICAgICAgIG9uRm9udFNpemVDaGFuZ2UodmFsKXsKICAgICAgICAgICAgdmFyIGlmcmFtZURvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpZnJhbWUiKVswXS5jb250ZW50V2luZG93LmRvY3VtZW50OwogICAgICAgICAgICB2YXIgZm9udFNpemVTdHlsZSA9IGlmcmFtZURvYy5nZXRFbGVtZW50QnlJZCgiZm9udFNpemUiKTsKICAgICAgICAgICAgaWYoIWZvbnRTaXplU3R5bGUpewogICAgICAgICAgICAgICAgZm9udFNpemVTdHlsZSA9IGlmcmFtZURvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICAgICAgZm9udFNpemVTdHlsZS5pZCA9ICJmb250U2l6ZSI7CiAgICAgICAgICAgICAgICBmb250U2l6ZVN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwogICAgICAgICAgICAgICAgZm9udFNpemVTdHlsZS5pbm5lckhUTUw9InAsZGl2eyBmb250LXNpemU6Iit2YWwrInB4IH0iOwogICAgICAgICAgICAgICAgaWZyYW1lRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdIRUFEJykuaXRlbSgwKS5hcHBlbmRDaGlsZChmb250U2l6ZVN0eWxlKTsKICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgZm9udFNpemVTdHlsZS5pbm5lckhUTUw9InAsZGl2eyBmb250LXNpemU6Iit2YWwrInB4IH0iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucmVhZGVyU3R5bGUuZm9udFNpemU9dmFsOwogICAgICAgIH0sCgogICAgICAgIG9uQmFja0ltYWdlQ2hhbmdlKHZhbCl7CiAgICAgICAgICAgIHZhciBpZnJhbWVEb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaWZyYW1lIilbMF0uY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgICAgICAgICAgdmFyICBiZG95ID0gaWZyYW1lRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07CiAgICAgICAgICAgIGJkb3kuc3R5bGUuYmFja2dyb3VuZEltYWdlPXZhbDsKICAgICAgICAgICAgdGhpcy5yZWFkZXJTdHlsZS5iYWNrSW1hZ2U9dmFsOwogICAgICAgIH0sCgogICAgICAgIGNoYW5nZUJhY2tJbWFnZSh2YWx1ZSl7CiAgICAgICAgICAgIGlmKHZhbHVlLmJhY2tJbWFnZXNyYykKICAgICAgICAgICAgICAgIHRoaXMuYmFja0ltYWdlPSJ1cmwoJyIrdGhpcy5wdWJsaWNQYXRoK3ZhbHVlLmJhY2tJbWFnZXNyYysiJykiOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aGlzLmJhY2tJbWFnZT0iIjsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVN0eWxlKCl7CiAgICAgICAgICAgIHRoaXMub25MaWdodENoYW5nZSh0aGlzLnJlYWRlclN0eWxlLmxpZ2h0KTsKICAgICAgICAgICAgdGhpcy5vbkJhY2tJbWFnZUNoYW5nZSh0aGlzLnJlYWRlclN0eWxlLmJhY2tJbWFnZSk7CiAgICAgICAgICAgIHRoaXMub25Gb250U2l6ZUNoYW5nZSh0aGlzLnJlYWRlclN0eWxlLmZvbnRTaXplKTsKICAgICAgICB9LAogICAgICAgIGNoYW5nZUNoYXB0ZXIoZXZlbnQsY2hhcHRlcil7CiAgICAgICAgICAgIGlmKHRoaXMuY2hhcHRlcj09Y2hhcHRlcikgcmV0dXJuOwogICAgICAgICAgICB0aGlzLmNoYW5nZVR5cGU9PSJtZW51IjsKICAgICAgICAgICAgdGhpcy5jaGFwdGVyLmlzQWN0aXZlPWZhbHNlOwogICAgICAgICAgICBjaGFwdGVyLmlzQWN0aXZlPXRydWU7CiAgICAgICAgICAgIHRoaXMuc2hvd0xlZnREcmF3ZXI9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMuY2hhcHRlcj1jaGFwdGVyOwogICAgICAgIH0sCiAgICB9LAogICAgYmVmb3JlQ3JlYXRlOmZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgICAgdmFyIGJvb2tmaWxlID0gdGhpcy4kcm91dGUucGFyYW1zLnBhdGhNYXRjaDsKICAgICAgICB2YXIgYm9va29wdGlvbj17CgogICAgICAgIH07CiAgICAgICAgaWYoIS8uZXB1YiQvLnRlc3QoYm9va2ZpbGUpJiZib29rZmlsZSE9dW5kZWZpbmVkKXsKICAgICAgICAgICAgYm9va29wdGlvbi5vcGVuQXM9ICdkaXJlY3RvcnknOwogICAgICAgIH0KICAgICAgICBib29rID0gbmV3IEVwdWIoYm9va2ZpbGUgIHx8ICIuL2VwdWIv5ryr6K+d5Zub5Liq5YWo6Z2iX0JfMDEwMTY3ODZfMDAxLmVwdWIiLGJvb2tvcHRpb24pOwogICAgICAgIGNvbnNvbGUubG9nKCdlUHViIGxvYWQnKTsKICAgICAgICBjb25zb2xlLmxvZyhib29rKTsKICAgICAgICByZW5kaXRpb24gPSBib29rLnJlbmRlclRvKCJ2aWV3ZXIiLCB7CiAgICAgICAgICAgIHdpZHRoOiAiMTAwJSIsCiAgICAgICAgICAgIC8vIHZpZXc6RXB1Yi5JbmxpbmVWaWV3CiAgICAgICAgfSk7CgogICAgICAgIGNvbnNvbGUubG9nKCdlUHViIHJlbmRlcicpOwogICAgICAgIGJvb2sucmVhZHkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImJvb2sgcmVhZHkiKTsKICAgICAgICB9KQoKCiAgICAgICAgdmFyIHZpZXdNYW5hZ2VyOwoKICAgICAgICByZW5kaXRpb24ub24oInN0YXJ0ZWQiLGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmlld01hbmFnZXIgPSByZW5kaXRpb24ubWFuYWdlcjsKICAgICAgICAgICAgY29uc29sZS5sb2coInJlbmRpdGlvbiBzdGFydGVkIikKICAgICAgICAgICAgdmlld01hbmFnZXIub24oImJlZm9yZUNyZWF0ZVZpZXciLGZ1bmN0aW9uIChzZWN0aW9uKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidmlld01hbmFnZXIgYmVmb3JlQ3JlYXRlVmlldyIpOwogICAgICAgICAgICAgICAgdGhhdC5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIHZpZXdNYW5hZ2VyLm9uKCJhZnRlckNyZWF0ZVZpZXciLGZ1bmN0aW9uICh2aWV3KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidmlld01hbmFnZXIgYWZ0ZXJDcmVhdGVWaWV3Iik7CiAgICAgICAgICAgICAgICB2aWV3Lmhvb2tzLmNvbnRlbnQucmVnaXN0ZXIoZnVuY3Rpb24gKGlmcmFtZSkgewogICAgICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlU3R5bGUoKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidmlldyB1cGRhdGVTdHlsZSIpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkKCiAgICAgICAgfSkKCiAgICAgICAgcmVuZGl0aW9uLm9uKCJyZW5kZXJlZCIsIGZ1bmN0aW9uKHNlY3Rpb24pewogICAgICAgICAgICBjb25zb2xlLmxvZygicmVuZGl0aW9uIHJlbmRlcmVkIiApOwogICAgICAgICAgICAvLyB0aGF0LnVwZGF0ZVN0eWxlKCk7CiAgICAgICAgICAgIHRoYXQubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBib29rLm5hdmlnYXRpb24gJiYgYm9vay5uYXZpZ2F0aW9uLmdldChzZWN0aW9uLmhyZWYpOwoKICAgICAgICAgICAgY29uc29sZS5sb2coImN1cnJlbnQiLGN1cnJlbnQpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzZWN0aW9uLmhyZWYiLHNlY3Rpb24uaHJlZikKICAgICAgICAgICAgY29uc29sZS5sb2coImJvb2submF2aWdhdGlvbiIsYm9vay5uYXZpZ2F0aW9uLnRvY0J5SHJlZikKICAgICAgICAgICAgY29uc29sZS5sb2coInRvYyIsdGhhdC50b2MpCiAgICAgICAgICAgIC8vIGlmKHRoYXQuY2hhcHRlci5ocmVmIT1jdXJyZW50LmhyZWYpewogICAgICAgICAgICAvLyAgICAgdGhhdC5jaGFuZ2VUeXBlPSJ0dXJuUGFnZSI7CiAgICAgICAgICAgIC8vICAgICB0aGF0LmNoYXB0ZXIuaXNBY3RpdmU9ZmFsc2U7CiAgICAgICAgICAgIC8vICAgICBmb3IobGV0IGl0ZW0gaW4gdGhhdC50b2MpIHsKICAgICAgICAgICAgLy8gICAgICAgICBpZihjdXJyZW50LmhyZWY9PWl0ZW0uaHJlZil7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGl0ZW0uaXNBY3RpdmU9dHJ1ZTsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgdGhhdC5jaGFwdGVyPWl0ZW07CiAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAvLyB9CgoKICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpZnJhbWUiKVswXS5jb250ZW50V2luZG93LmRvY3VtZW50OwogICAgICAgICAgICB2YXIgdmlld3BvcnQgPSBpZnJhbWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImh0bWwiKVswXTsKCgogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZXdlciIpLmZpcnN0RWxlbWVudENoaWxkOwogICAgICAgICAgICB2YXIgc3RhcnRTY3JvbGxMZWZ0OwogICAgICAgICAgICBjb25zb2xlLmxvZyhjb250YWluZXIpOwoKCiAgICAgICAgICAgIHZhciBwYWdlV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgLy8g6aG16Z2i5a695bqmCiAgICAgICAgICAgIHZhciBtYXhXaWR0aCA9ICBwYWdlV2lkdGgvMjsKICAgICAgICAgICAgdmFyIHN0YXJ0WCwgc3RhcnRZOwogICAgICAgICAgICB2YXIgaW5pdGlhbFBvcyA9IDA7ICAvLyDmiYvmjIfmjInkuIvnmoTlsY/luZXkvY3nva4KICAgICAgICAgICAgdmFyIG1vdmVMZW5ndGggPSAwOyAgLy8g5omL5oyH5b2T5YmN5ruR5Yqo55qE6Led56a7CiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnbGVmdCc7IC8vIOa7keWKqOeahOaWueWQkQogICAgICAgICAgICB2YXIgaXNNb3ZlID0gZmFsc2U7IC8vIOaYr+WQpuWPkeeUn+W3puWPs+a7keWKqAogICAgICAgICAgICB2YXIgc3RhcnRUID0gMDsgLy8g6K6w5b2V5omL5oyH5oyJ5LiL5Y6755qE5pe26Ze0CiAgICAgICAgICAgIHZhciBpc1RvdWNoRW5kID0gdHJ1ZTsgLy8g5qCH6K6w5b2T5YmN5ruR5Yqo5piv5ZCm57uT5p2fKOaJi+aMh+W3suemu+W8gOWxj+W5lSkKICAgICAgICAgICAgdmFyIHRocm90dGxlVGltZSA9IDA7CiAgICAgICAgICAgIHZhciBsYXN0U2Nyb2xsLHRvdGFsUGFnZXMsY3VycmVudFBhZ2U7CgogICAgICAgICAgICAvLyDmiYvmjIfmlL7lnKjlsY/luZXkuIoKICAgICAgICAgICAgdmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBzdGFydFNjcm9sbExlZnQgPSBjb250YWluZXIuc2Nyb2xsTGVmdDsKICAgICAgICAgICAgICAgIGxldCBsb2NhdGlvbiA9IHZpZXdNYW5hZ2VyLmN1cnJlbnRMb2NhdGlvbigpOwogICAgICAgICAgICAgICAgdG90YWxQYWdlcyA9IGxvY2F0aW9uWzBdLnRvdGFsUGFnZXM7CiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IGxvY2F0aW9uWzBdLnBhZ2VzWzBdOwoKCiAgICAgICAgICAgICAgICAvL3RvdWNoc3RhcnTkuI50b3VjaGVuZOeahOa1j+iniOWZqOm7mOiupOihjOS4uuS4jeiDvemYu+atou+8jAogICAgICAgICAgICAgICAgLy8g5aaC5p6c6Zi75q2i55qE6K+d5YiZ5rWP6KeI5Zmo5peg5rOV6K6h566X6K+l6IqC54K55YaF55qE54K55Ye7562J5YW25LuW5LqL5Lu2CiAgICAgICAgICAgICAgICAvL2UucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b3VjaHN0YXJ0Jyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdGFydFNjcm9sbExlZnQpOwogICAgICAgICAgICAgICAgLy8g5Y2V5omL5oyH6Kem5pG45oiW6ICF5aSa5omL5oyH5ZCM5pe26Kem5pG477yM56aB5q2i56ys5LqM5Liq5omL5oyH5bu26L+f5pON5L2c5LqL5Lu2CiAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSB8fCBpc1RvdWNoRW5kKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOwogICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9IHRvdWNoLnBhZ2VYOwogICAgICAgICAgICAgICAgICAgIHN0YXJ0WSA9IHRvdWNoLnBhZ2VZOwogICAgICAgICAgICAgICAgICAgIGxhc3RTY3JvbGw9MDsKICAgICAgICAgICAgICAgICAgICBzdGFydFQgPSArIG5ldyBEYXRlKCk7IC8vIOiusOW9leaJi+aMh+aMieS4i+eahOW8gOWni+aXtumXtAogICAgICAgICAgICAgICAgICAgIGlzTW92ZSA9IGZhbHNlOyAvLyDmmK/lkKbkuqfnlJ/mu5HliqgKICAgICAgICAgICAgICAgICAgICBpc1RvdWNoRW5kID0gZmFsc2U7IC8vIOW9k+WJjea7keWKqOW8gOWniwoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZX0pOwoKICAgICAgICAgICAgLy8g5omL5oyH5Zyo5bGP5bmV5LiK5ruR5Yqo77yM6aG16Z2i6Lef6ZqP5omL5oyH56e75YqoCiAgICAgICAgICAgIHZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndG91Y2htb3ZlJyk7CgogICAgICAgICAgICAgICAgLy/nlKjkuo7popHnuYHmu5HliqjpmLLmipYKICAgICAgICAgICAgICAgIC8vIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIC8vIGlmKCF0aHJvdHRsZVRpbWUpIHRocm90dGxlVGltZT1ub3c7CiAgICAgICAgICAgICAgICAvLyBpZihub3ctdGhyb3R0bGVUaW1lPDIwKSByZXR1cm47CiAgICAgICAgICAgICAgICAvLyB0aHJvdHRsZVRpbWUgPSBub3c7CgogICAgICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN5ruR5Yqo5bey57uT5p2f77yM5LiN566h5YW25LuW5omL5oyH5piv5ZCm5Zyo5bGP5bmV5LiK6YO956aB5q2i6K+l5LqL5Lu2CiAgICAgICAgICAgICAgICBpZiAoaXNUb3VjaEVuZCkgcmV0dXJuIDsKCiAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07CiAgICAgICAgICAgICAgICAvL2NvbnRhaW5lciBzY3JvbGzmlLnlj5jml7Z0b3VjaC5wYWdlWOS5n+S8mui3n+edgOWPmO+8jOaJgOS7pemcgOimgeWHj+aOieWuueWZqOa7muWKqOeahOi3neemu+iOt+WPluecn+ato+eahOaJi+aMh+enu+WKqOi3neemu+OAggogICAgICAgICAgICAgICAgdmFyIHNjcm9sbHRlbXAgPSBjb250YWluZXIuc2Nyb2xsTGVmdC1zdGFydFNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic2Nyb2xsdGVtcDoiK3Njcm9sbHRlbXApOwogICAgICAgICAgICAgICAgdmFyIGRlbHRhWCA9IHRvdWNoLnBhZ2VYIC0gc3RhcnRYLXNjcm9sbHRlbXA7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicGFnZVg6Iit0b3VjaC5wYWdlWCAsImRlbHRhWDoiK2RlbHRhWCwic3RhcnRYOiIrc3RhcnRYKTsKICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRlbHRhWCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnOyAvLyDliKTmlq3miYvmjIfmu5HliqjnmoTmlrnlkJEKCiAgICAgICAgICAgICAgICAvLyBpZih0aGF0LmNoYXB0ZXIuaHJlZj09dGhhdC50b2NbMF0uaHJlZiYmZGlyZWN0aW9uPT0ncmlnaHQnJiZjdXJyZW50UGFnZT09MSkgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGlzTW92ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBtb3ZlTGVuZ3RoID0gZGVsdGFYOwoKICAgICAgICAgICAgICAgIHNjcm9sbFBhZ2UuY2FsbCh2aWV3cG9ydCwgbW92ZUxlbmd0aCxlKTsKCiAgICAgICAgICAgICAgICAvL+WmguaenOa7keWKqOi3neemu+i2hei/h+acgOWkp+i3neemu+WImee/u+mhtQogICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMobW92ZUxlbmd0aCk+PW1heFdpZHRoKXsKICAgICAgICAgICAgICAgICAgICB0aHJvdHRsZVRpbWUgPSAwOwogICAgICAgICAgICAgICAgICAgIHR1cm5QYWdlLmNhbGwodmlld3BvcnQsbW92ZUxlbmd0aCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlfSk7CgoKCgogICAgICAgICAgICAvLyDmiYvmjIfnprvlvIDlsY/luZXml7bvvIzorqHnrpfmnIDnu4jpnIDopoHlgZznlZnlnKjlk6rkuIDpobUKICAgICAgICAgICAgdmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RvdWNoZW5kJyk7CgogICAgICAgICAgICAgICAgaWYoIWlzTW92ZSl7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgIGlzVG91Y2hFbmQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZihlLnRhcmdldC50YWdOYW1lPT0iQSJ8fGUudGFyZ2V0LnBhcmVudE5vZGUudGFnTmFtZT09IkEiKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIHRoYXQucG9wdXBTaG93PXRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICB0aHJvdHRsZVRpbWUgPSAwOwogICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IDA7CiAgICAgICAgICAgICAgICAvLyDorqHnrpfmiYvmjIflnKjlsY/luZXkuIrlgZznlZnnmoTml7bpl7QKICAgICAgICAgICAgICAgIHZhciBkZWx0YVQgPSArIG5ldyBEYXRlKCkgLSBzdGFydFQ7CiAgICAgICAgICAgICAgICAvLyDlj5HnlJ/kuobmu5HliqjvvIzlubbkuJTlvZPliY3mu5Hliqjkuovku7bmnKrnu5PmnZ8KICAgICAgICAgICAgICAgIGlmIChpc01vdmUgJiYgIWlzVG91Y2hFbmQpIHsKICAgICAgICAgICAgICAgICAgICBpc1RvdWNoRW5kID0gdHJ1ZTsgLy8g5qCH6K6w5b2T5YmN5a6M5pW055qE5ruR5Yqo5LqL5Lu25bey57uP57uT5p2fCiAgICAgICAgICAgICAgICAgICAgLy8g5L2/55So5Yqo55S76L+H5rih6K6p6aG16Z2i5ruR5Yqo5Yiw5pyA57uI55qE5L2N572uCiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhVCA8IDMwMCkgeyAvLyDlpoLmnpzlgZznlZnml7bpl7TlsI/kuo4zMDBtcyzliJnorqTkuLrmmK/lv6vpgJ/mu5HliqjvvIzml6Dorrrmu5Hliqjot53nprvmmK/lpJrlsJHvvIzpg73lgZznlZnliLDkuIvkuIDpobUKCiAgICAgICAgICAgICAgICAgICAgICAgIHR1cm5QYWdlLmNhbGwodmlld3BvcnQsbW92ZUxlbmd0aCk7CgogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOa7keWKqOi3neemu+Wwj+S6juWxj+W5leeahDUwJe+8jOWImemAgOWbnuWIsOS4iuS4gOmhtQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobW92ZUxlbmd0aCkgPCBtYXhXaWR0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5omn6KGM5ruR5Yqo77yM6K6p6aG16Z2i5oGi5aSNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxQYWdlLmNhbGwodmlld3BvcnQsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUb3VjaEVuZCA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5ruR5Yqo6Led56a75aSn5LqO5bGP5bmV55qENTAl77yM5YiZ57+76aG1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0dXJuUGFnZS5jYWxsKHZpZXdwb3J0LG1vdmVMZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7CgoKICAgICAgICAgICAgZnVuY3Rpb24gdHVyblBhZ2UobW92ZUxlbmd0aCl7CiAgICAgICAgICAgICAgICBpc1RvdWNoRW5kID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250YWluZXIuc2Nyb2xsTGVmdCk7CiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAwLCAwKSc7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIm1vdmVMZW5ndGg6Iittb3ZlTGVuZ3RoKTsKICAgICAgICAgICAgICAgIGlmKGRpcmVjdGlvbj09PSJsZWZ0Iil7CiAgICAgICAgICAgICAgICAgICAgYm9vay5wYWNrYWdlLm1ldGFkYXRhLmRpcmVjdGlvbiA9PT0gInJ0bCIgPyByZW5kaXRpb24ucHJldihtb3ZlTGVuZ3RoKSA6IHJlbmRpdGlvbi5uZXh0KG1vdmVMZW5ndGgpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgYm9vay5wYWNrYWdlLm1ldGFkYXRhLmRpcmVjdGlvbiA9PT0gInJ0bCIgPyByZW5kaXRpb24ubmV4dChtb3ZlTGVuZ3RoKSA6IHJlbmRpdGlvbi5wcmV2KG1vdmVMZW5ndGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIC8vIOmhtemdouW5s+enuwogICAgICAgICAgICBmdW5jdGlvbiBzY3JvbGxQYWdlKHRyYW5zbGF0ZSx0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInRvdGFsUGFnZXM6Iit0b3RhbFBhZ2VzLCJjdXJyZW50UGFnZToiK2N1cnJlbnRQYWdlKQogICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRQYWdlPT0xJiZkaXJlY3Rpb249PT0icmlnaHQifHxjdXJyZW50UGFnZT09dG90YWxQYWdlcyYmZGlyZWN0aW9uPT09ImxlZnQiKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIHRyYW5zbGF0ZSArICdweCwgMCwgMCknOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygid2Via2l0VHJhbnNmb3JtIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuc2Nyb2xsTGVmdD1zdGFydFNjcm9sbExlZnQtdHJhbnNsYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygic2Nyb2xsTGVmdCIpOwogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICB9CgoKICAgICAgICB9KTsKCiAgICAgICAgcmVuZGl0aW9uLm9uKCJyZWxvY2F0ZWQiLCBmdW5jdGlvbihsb2NhdGlvbil7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZWxvY2F0ZWQgbG9jYXRpb24iLGxvY2F0aW9uKTsKICAgICAgICB9KTsKCiAgICAgICAgcmVuZGl0aW9uLm9uKCJsYXlvdXQiLCBmdW5jdGlvbihsYXlvdXQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImxheW91dCIsbGF5b3V0KTsKICAgICAgICB9KTsKCgogICAgICAgIGJvb2subG9hZGVkLm5hdmlnYXRpb24udGhlbihmdW5jdGlvbih0b2MpewogICAgICAgICAgICB0aGF0LnRvYz10b2MudG9jOwogICAgICAgICAgICB0aGF0LmNoYXB0ZXIgPSB0b2MudG9jWzBdOwogICAgICAgICAgICB0aGF0LmNoYXB0ZXIuaXNBY3RpdmU9dHJ1ZTsKICAgICAgICAgICAgY29uc29sZS5sb2coIm5hdmlnYXRpb24sbG9hZGVkIikKICAgICAgICB9KTsKCiAgICB9LAogICAgZGVzdHJveWVkOmZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygidW5sb2FkaW5nIik7CiAgICAgICAgYm9vay5kZXN0cm95KCk7CiAgICB9Cn0K"},{"version":3,"sources":["book.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"book.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n      <div id=\"reader-overlay\"></div>\n\n      <van-popup\n              v-model=\"showLeftDrawer\"\n              position=\"left\"\n              :style=\"{ width: '80%',height:'100%' }\"\n      >\n          <van-tabs type=\"card\">\n              <van-tab title=\"目录\">\n                  <menu v-bind:menuList=\"toc\"></menu>\n              </van-tab>\n              <van-tab title=\"书签\">内容 2</van-tab>\n              <van-tab title=\"笔记\">内容 3</van-tab>\n          </van-tabs>\n\n      </van-popup>\n\n\n      <van-popup\n              v-model=\"popupShow\"\n              position=\"top\"\n              :style=\"{ height: '30%' }\"\n              class=\"reader-tool\"\n      >\n          <div>\n              <van-row class=\"tool-row\">\n                  <van-col span=\"4\">亮度</van-col>\n                  <van-col span=\"16\">\n                          <van-slider v-model=\"light\" @change=\"onLightChange\" />\n                  </van-col>\n              </van-row>\n              <van-row class=\"tool-row\">\n                  <van-col span=\"4\">字号</van-col>\n                  <van-col span=\"16\">\n                      <van-stepper v-model=\"fontSize\" @change=\"onFontSizeChange\" min=\"10\" max=\"24\" input-width=\"40px\" button-size=\"32px\" step=\"2\" disable-input/>\n                  </van-col>\n              </van-row>\n              <van-row class=\"tool-row\">\n                  <van-col span=\"4\">背景</van-col>\n                  <van-col span=\"4\" v-for=\"item in backImageList\" :key=\"item.backImagesrc\">\n                      <span v-bind:class=\"'backImage '+item.class\" @click=\"changeBackImage(item)\"></span>\n                  </van-col>\n              </van-row>\n          </div>\n\n\n\n      </van-popup>\n\n\n      <div v-if=\"loading\" class=\"loading-overlay\">\n        <van-loading color=\"#1989fa\" />\n      </div>\n\n      <div style=\"height: 100vh\">\n        <van-nav-bar\n                v-bind:title=\"chapter.label\"\n                left-text=\"返回\"\n                right-text=\"章节\"\n                left-arrow\n                @click-left=\"onClickLeft\"\n                @click-right=\"onClickRight\"\n        ></van-nav-bar>\n      <div id=\"viewer\"></div>\n    </div>\n  </div>\n</template>\n<style scoped>\n  .loading-overlay{\n      position: absolute;\n        top:46px;\n      bottom: 0px;\n      left: 0;\n      right: 0;\n      z-index: 10000;\n    line-height: 80vh;\n    text-align:center;\n  }\n  .menuList .active{\n      color: red;\n  }\n    .tool-row{\n        /*height: 40px;*/\n        text-align: center;\n        line-height: 40px;\n    }\n    .van-popup>div{\n        padding: 10px;\n    }\n    .van-slider{\n        margin: 20px;\n    }\n    #reader-overlay{\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        left: 0;\n        z-index: 10000;\n        background-color: rgba(0,0,0,0);\n        pointer-events:none;\n    }\n    .backImage{\n        display: inline-block;\n        width: 30px;\n        height: 30px;\n        border-radius: 30px;\n        margin-top: 5px;\n        border: 1px solid #DFDFDF;\n    }\n  .bg-timg4 {\n      background: url('/readerImages/css_sprites.png') -10px -10px;\n  }\n  .bg-timg3 {\n      background: url('/readerImages/css_sprites.png') -70px -10px;\n  }\n  .bg-timg1 {\n      background: url('/readerImages/css_sprites.png')  -10px -70px;\n  }\n  .bg-timg {\n      background: url('/readerImages/css_sprites.png') -70px -70px;\n  }\n</style>\n<script>\n    import { Image ,Tab, Tabs,Loading,NavBar ,CellGroup,Cell,Card,RadioGroup,Radio,Popup,Progress, Row, Col,Slider,Stepper    } from 'vant';\n    import  menu from '@/components/menu';\n    import Vue from 'vue';\n    import Epub from 'epubjs';\n\n\n    Vue.use(NavBar ).use(Loading ).use(Card)\n        .use(RadioGroup).use(Radio).use(CellGroup)\n        .use(Cell).use(Tabs).use(Tab).use(Popup ).use(Progress)\n        .use( Row).use( Col ).use(Slider).use(Stepper).use(Image);\n\n    var book,rendition;\n\n    export default {\n        name: 'book',\n        components:{\n            menu:menu\n        },\n        data(){\n            return {\n                publicPath:process.env.BASE_URL,\n                book:null,\n                rendition:null,\n                chapter:{},\n                changeType:\"menu\",\n                firstLoad:true,\n                loading:true,\n                popupShow:false,\n                showLeftDrawer:false,\n                light:100,\n                fontSize:14,\n                backImage:\"\",\n                toc:[],\n                backImageList:[\n                    {class:\"bg-timg\",backImagesrc:\"readerImages/timg_big.jpg\"},\n                    {class:\"bg-timg1\",backImagesrc:\"readerImages/timg1_big.jpg\"},\n                    {class:\"bg-timg3\",backImagesrc:\"readerImages/timg3_big.jpg\"},\n                    {class:\"bg-timg4\",backImagesrc:\"\"},\n                ],\n                readerStyle:{\n                    light:100,\n                    fontSize:14,\n                    backImage:\"\"\n                }\n            }\n        },\n        watch:{\n            chapter:function (val) {\n                if(this.changeType==\"menu\")\n                    rendition.display(val.href);\n            },\n            fontSize:function (val) {\n                this.onFontSizeChange(val);\n            },\n            light:function (val) {\n               this.onLightChange(val);\n            },\n            backImage:function (val) {\n               this.onBackImageChange(val);\n            }\n        },\n        methods:{\n            onClickLeft() {\n                window.history.back(-1);\n                // book\n            },\n            onClickRight() {\n                this.showLeftDrawer=true;\n            },\n            onLightChange(val){\n                var overlay = document.getElementById(\"reader-overlay\");\n                overlay.style.backgroundColor=\"rgba(0,0,0,\"+(0.5-val/200)+\")\";\n                this.readerStyle.light=val;\n            },\n            onFontSizeChange(val){\n                var iframeDoc = document.getElementsByTagName(\"iframe\")[0].contentWindow.document;\n                var fontSizeStyle = iframeDoc.getElementById(\"fontSize\");\n                if(!fontSizeStyle){\n                    fontSizeStyle = iframeDoc.createElement('style');\n                    fontSizeStyle.id = \"fontSize\";\n                    fontSizeStyle.type = 'text/css';\n                    fontSizeStyle.innerHTML=\"p,div{ font-size:\"+val+\"px }\";\n                    iframeDoc.getElementsByTagName('HEAD').item(0).appendChild(fontSizeStyle);\n                } else{\n                    fontSizeStyle.innerHTML=\"p,div{ font-size:\"+val+\"px }\";\n                }\n                this.readerStyle.fontSize=val;\n            },\n\n            onBackImageChange(val){\n                var iframeDoc = document.getElementsByTagName(\"iframe\")[0].contentWindow.document;\n                var  bdoy = iframeDoc.getElementsByTagName(\"body\")[0];\n                bdoy.style.backgroundImage=val;\n                this.readerStyle.backImage=val;\n            },\n\n            changeBackImage(value){\n                if(value.backImagesrc)\n                    this.backImage=\"url('\"+this.publicPath+value.backImagesrc+\"')\";\n                else\n                    this.backImage=\"\";\n            },\n            updateStyle(){\n                this.onLightChange(this.readerStyle.light);\n                this.onBackImageChange(this.readerStyle.backImage);\n                this.onFontSizeChange(this.readerStyle.fontSize);\n            },\n            changeChapter(event,chapter){\n                if(this.chapter==chapter) return;\n                this.changeType==\"menu\";\n                this.chapter.isActive=false;\n                chapter.isActive=true;\n                this.showLeftDrawer=false;\n                this.chapter=chapter;\n            },\n        },\n        beforeCreate:function () {\n            var that = this;\n            var bookfile = this.$route.params.pathMatch;\n            var bookoption={\n\n            };\n            if(!/.epub$/.test(bookfile)&&bookfile!=undefined){\n                bookoption.openAs= 'directory';\n            }\n            book = new Epub(bookfile  || \"./epub/漫话四个全面_B_01016786_001.epub\",bookoption);\n            console.log('ePub load');\n            console.log(book);\n            rendition = book.renderTo(\"viewer\", {\n                width: \"100%\",\n                // view:Epub.InlineView\n            });\n\n            console.log('ePub render');\n            book.ready.then(function() {\n                console.log(\"book ready\");\n            })\n\n\n            var viewManager;\n\n            rendition.on(\"started\",function () {\n                viewManager = rendition.manager;\n                console.log(\"rendition started\")\n                viewManager.on(\"beforeCreateView\",function (section) {\n                    console.log(\"viewManager beforeCreateView\");\n                    that.loading = true;\n                })\n\n                viewManager.on(\"afterCreateView\",function (view) {\n                    console.log(\"viewManager afterCreateView\");\n                    view.hooks.content.register(function (iframe) {\n                        that.updateStyle();\n                        console.log(\"view updateStyle\");\n                    })\n                })\n\n            })\n\n            rendition.on(\"rendered\", function(section){\n                console.log(\"rendition rendered\" );\n                // that.updateStyle();\n                that.loading = false;\n\n                let current = book.navigation && book.navigation.get(section.href);\n\n                console.log(\"current\",current)\n                console.log(\"section.href\",section.href)\n                console.log(\"book.navigation\",book.navigation.tocByHref)\n                console.log(\"toc\",that.toc)\n                // if(that.chapter.href!=current.href){\n                //     that.changeType=\"turnPage\";\n                //     that.chapter.isActive=false;\n                //     for(let item in that.toc) {\n                //         if(current.href==item.href){\n                //             item.isActive=true;\n                //             that.chapter=item;\n                //         }\n                //     }\n                // }\n\n\n                var iframe = document.getElementsByTagName(\"iframe\")[0].contentWindow.document;\n                var viewport = iframe.getElementsByTagName(\"html\")[0];\n\n\n                var container = document.getElementById(\"viewer\").firstElementChild;\n                var startScrollLeft;\n                console.log(container);\n\n\n                var pageWidth = window.innerWidth; // 页面宽度\n                var maxWidth =  pageWidth/2;\n                var startX, startY;\n                var initialPos = 0;  // 手指按下的屏幕位置\n                var moveLength = 0;  // 手指当前滑动的距离\n                var direction = 'left'; // 滑动的方向\n                var isMove = false; // 是否发生左右滑动\n                var startT = 0; // 记录手指按下去的时间\n                var isTouchEnd = true; // 标记当前滑动是否结束(手指已离开屏幕)\n                var throttleTime = 0;\n                var lastScroll,totalPages,currentPage;\n\n                // 手指放在屏幕上\n                viewport.addEventListener('touchstart', function (e) {\n                    startScrollLeft = container.scrollLeft;\n                    let location = viewManager.currentLocation();\n                    totalPages = location[0].totalPages;\n                    currentPage = location[0].pages[0];\n\n\n                    //touchstart与touchend的浏览器默认行为不能阻止，\n                    // 如果阻止的话则浏览器无法计算该节点内的点击等其他事件\n                    //e.preventDefault();\n                    console.log('touchstart');\n                    console.log(startScrollLeft);\n                    // 单手指触摸或者多手指同时触摸，禁止第二个手指延迟操作事件\n                    if (e.touches.length === 1 || isTouchEnd) {\n                        var touch = e.touches[0];\n                        startX = touch.pageX;\n                        startY = touch.pageY;\n                        lastScroll=0;\n                        startT = + new Date(); // 记录手指按下的开始时间\n                        isMove = false; // 是否产生滑动\n                        isTouchEnd = false; // 当前滑动开始\n\n                    }\n                }, { passive: false});\n\n                // 手指在屏幕上滑动，页面跟随手指移动\n                viewport.addEventListener('touchmove', function (e) {\n                    e.preventDefault();\n                    console.log('touchmove');\n\n                    //用于频繁滑动防抖\n                    // var now = new Date().getTime();\n                    // if(!throttleTime) throttleTime=now;\n                    // if(now-throttleTime<20) return;\n                    // throttleTime = now;\n\n                    // 如果当前滑动已结束，不管其他手指是否在屏幕上都禁止该事件\n                    if (isTouchEnd) return ;\n\n                    var touch = e.touches[0];\n                    //container scroll改变时touch.pageX也会跟着变，所以需要减掉容器滚动的距离获取真正的手指移动距离。\n                    var scrolltemp = container.scrollLeft-startScrollLeft;\n                    console.log(\"scrolltemp:\"+scrolltemp);\n                    var deltaX = touch.pageX - startX-scrolltemp;\n                    console.log(\"pageX:\"+touch.pageX ,\"deltaX:\"+deltaX,\"startX:\"+startX);\n                    direction = deltaX > 0 ? 'right' : 'left'; // 判断手指滑动的方向\n\n                    // if(that.chapter.href==that.toc[0].href&&direction=='right'&&currentPage==1) return;\n\n                    isMove = true;\n                    moveLength = deltaX;\n\n                    scrollPage.call(viewport, moveLength,e);\n\n                    //如果滑动距离超过最大距离则翻页\n                    if(Math.abs(moveLength)>=maxWidth){\n                        throttleTime = 0;\n                        turnPage.call(viewport,moveLength);\n                    }\n\n                }, { passive: false});\n\n\n\n\n                // 手指离开屏幕时，计算最终需要停留在哪一页\n                viewport.addEventListener('touchend', function (e) {\n                    console.log('touchend');\n\n                    if(!isMove){\n                        console.log(e.target);\n                        isTouchEnd=true;\n                        if(e.target.tagName==\"A\"||e.target.parentNode.tagName==\"A\") return;\n                        e.preventDefault();\n                        that.popupShow=true;\n                        return;\n                    }\n\n\n                    throttleTime = 0;\n                    var translate = 0;\n                    // 计算手指在屏幕上停留的时间\n                    var deltaT = + new Date() - startT;\n                    // 发生了滑动，并且当前滑动事件未结束\n                    if (isMove && !isTouchEnd) {\n                        isTouchEnd = true; // 标记当前完整的滑动事件已经结束\n                        // 使用动画过渡让页面滑动到最终的位置\n                        if (deltaT < 300) { // 如果停留时间小于300ms,则认为是快速滑动，无论滑动距离是多少，都停留到下一页\n\n                            turnPage.call(viewport,moveLength);\n\n                        } else {\n                            // 如果滑动距离小于屏幕的50%，则退回到上一页\n                            if (Math.abs(moveLength) < maxWidth) {\n                                // 执行滑动，让页面恢复\n                                scrollPage.call(viewport, 0);\n                                isTouchEnd = true;\n\n                            } else {\n                                // 如果滑动距离大于屏幕的50%，则翻页\n                                turnPage.call(viewport,moveLength);\n                            }\n                        }\n\n                    }\n\n                }, { passive: false });\n\n\n                function turnPage(moveLength){\n                    isTouchEnd = true;\n\n                    console.log(container.scrollLeft);\n                    this.style.webkitTransform = 'translate3d(0, 0, 0)';\n\n                    console.log(\"moveLength:\"+moveLength);\n                    if(direction===\"left\"){\n                        book.package.metadata.direction === \"rtl\" ? rendition.prev(moveLength) : rendition.next(moveLength);\n                    }else{\n                        book.package.metadata.direction === \"rtl\" ? rendition.next(moveLength) : rendition.prev(moveLength);\n                    }\n                }\n\n\n\n                // 页面平移\n                function scrollPage(translate,type) {\n                        console.log(\"totalPages:\"+totalPages,\"currentPage:\"+currentPage)\n                        if(currentPage==1&&direction===\"right\"||currentPage==totalPages&&direction===\"left\"){\n                            this.style.webkitTransform = 'translate3d(' + translate + 'px, 0, 0)';\n                            console.log(\"webkitTransform\");\n                        } else{\n                            container.scrollLeft=startScrollLeft-translate;\n                            console.log(\"scrollLeft\");\n                        }\n\n\n                }\n\n\n            });\n\n            rendition.on(\"relocated\", function(location){\n                console.log(\"relocated location\",location);\n            });\n\n            rendition.on(\"layout\", function(layout) {\n                console.log(\"layout\",layout);\n            });\n\n\n            book.loaded.navigation.then(function(toc){\n                that.toc=toc.toc;\n                that.chapter = toc.toc[0];\n                that.chapter.isActive=true;\n                console.log(\"navigation,loaded\")\n            });\n\n        },\n        destroyed:function () {\n            console.log(\"unloading\");\n            book.destroy();\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}