{"remainingRequest":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\components\\bookmenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\components\\bookmenu.vue","mtime":1577180939504},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgSWNvbixEaXZpZGVyICB9IGZyb20gJ3ZhbnQnOwoKVnVlLnVzZShJY29uKS51c2UoRGl2aWRlcik7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiYm9va21lbnUiLAogICAgcHJvcHM6ewogICAgICAgIG1lbnVMaXN0OkFycmF5LAogICAgICAgIGN1cnJlbnRNZW51Ok9iamVjdAogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIG1lbnVMaXN0TGVuZ3RoOnRoaXMubWVudUxpc3QubGVuZ3RoCiAgICAgICAgfQogICAgfSwKICAgIGJlZm9yZU1vdW50KCl7CiAgICAgICAgdGhpcy5wYXJzZU1lbnVMaXN0KHRoaXMubWVudUxpc3QpOwogICAgfSwKICAgIHdhdGNoOnsKICAgICAgICBjdXJyZW50TWVudTpmdW5jdGlvbiAob2xkVmFsLG5ld1ZhbCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY3VycmVudE1lbnUgY2hhbmdlIik7CiAgICAgICAgICAgIGZvcih2YXIgaWR4PTA7aWR4PHRoaXMubWVudUxpc3QubGVuZ3RoO2lkeCsrKXsKICAgICAgICAgICAgICAgIHZhciBpdGVtPXRoaXMubWVudUxpc3RbaWR4XTsKICAgICAgICAgICAgICAgIGlmKGl0ZW0uaHJlZj09bmV3VmFsLmhyZWYpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjdXJyZW50TWVudSBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLm1lbnVMaXN0LnNwbGljZShpZHgsIDEsIGl0ZW0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHBhcnNlTWVudUxpc3Q6ZnVuY3Rpb24obWVudUxpc3QpewogICAgICAgICAgICAvL+acgOWInei/m+WFpeW1jOWll+e7hOS7tui/m+ihjOaVsOaNruWIneWni+WMlgogICAgICAgICAgICBpZihtZW51TGlzdC5sZW5ndGgmJiFtZW51TGlzdFswXS5wYXJlbnQpewogICAgICAgICAgICAgICAgZm9yKHZhciBpZHg9MDtpZHg8bWVudUxpc3QubGVuZ3RoO2lkeCsrKXsKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbT1tZW51TGlzdFtpZHhdOwogICAgICAgICAgICAgICAgICAgIGl0ZW0uaWNvbk5hbWU9IiI7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5pc09wZW49ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5zdWJpdGVtcyYmaXRlbS5zdWJpdGVtcy5sZW5ndGgpewogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmljb25OYW1lPSJhcnJvdyI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VNZW51TGlzdChpdGVtLnN1Yml0ZW1zKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v54K55Ye75b2T5YmN5bGC6Kem5Y+RCiAgICAgICAgY2hhbmdlQ2hhcHRlcjpmdW5jdGlvbiAoZXZlbnQsaXRlbSkgewogICAgICAgICAgICBpZihldmVudC50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoImFjdGl2ZSIpIT0tMSkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc29sZS5sb2coImNoYW5nZUNoYXB0ZXIiKTsKICAgICAgICAgICB2YXIgbGFiZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYm9va21lbnUtbGFiZWwiKTsKICAgICAgICAgICBmb3IodmFyIGlkeD0wO2lkeDxsYWJlbHMubGVuZ3RoO2lkeCsrKXsKICAgICAgICAgICAgICAgbGFiZWxzW2lkeF0uY2xhc3NOYW1lPSJib29rbWVudS1sYWJlbCI7CiAgICAgICAgICAgfQogICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZigiYm9va21lbnUtbGFiZWwiKSE9LTEpCiAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWU9ZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSsiIGFjdGl2ZSI7CiAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc05hbWU9ZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lKyIgYWN0aXZlIjsKCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsaXRlbSk7CiAgICAgICAgfSwKICAgICAgICAvL+ebkeWQrOS8oOmAkuWtkOWxggogICAgICAgIG9uQ2hhbmdlQ2hhcHRlcjpmdW5jdGlvbihpdGVtKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJyxpdGVtKTsKICAgICAgICB9LAogICAgICAgIHRvZ2dsZU1lbnUoaXRlbSxpZHgpewogICAgICAgICAgICBpZihpdGVtLmlzT3Blbil7CiAgICAgICAgICAgICAgICBpdGVtLmlzT3Blbj1mYWxzZTsKICAgICAgICAgICAgICAgIGl0ZW0uaWNvbk5hbWUgPSAnYXJyb3cnCiAgICAgICAgICAgIH0gZWxzZXsKICAgICAgICAgICAgICAgIGl0ZW0uaXNPcGVuPXRydWU7CiAgICAgICAgICAgICAgICBpdGVtLmljb25OYW1lID0gJ2Fycm93LWRvd24nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy/op6blj5HmlbDnu4TlhoXlrrnlj5jliqjnmoTnm5HlkKwKICAgICAgICAgICAgdGhpcy5tZW51TGlzdC5zcGxpY2UoaWR4LCAxLCBpdGVtKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["bookmenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bookmenu.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"menuList\">\n        <van-divider/>\n        <div class=\"bookmenuItem\" v-for=\"(item,index) in menuList\" :key=\"item.name\" v-bind:itemHref=\"item.href\">\n            <span class=\"bookmenu-icon\"><van-icon v-bind:name=\"item.subitems.length?item.iconName:''\" @click=\"toggleMenu(item,index)\"/></span>\n            <span class=\"bookmenu-label\"  @click=\"changeChapter($event,item)\">\n                <span>{{item.label}}</span>\n            </span>\n            <bookmenu v-show=\"item.subitems.length&&item.isOpen\" v-bind:menuList=\"item.subitems\" @change=\"onChangeChapter\"></bookmenu>\n            <van-divider v-if=\"index!=menuListLength-1\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n    import Vue from 'vue';\n    import { Icon,Divider  } from 'vant';\n\n    Vue.use(Icon).use(Divider);\n\n    export default {\n        name: \"bookmenu\",\n        props:{\n            menuList:Array,\n            currentMenu:Object\n        },\n        data(){\n            return{\n                menuListLength:this.menuList.length\n            }\n        },\n        beforeMount(){\n            this.parseMenuList(this.menuList);\n        },\n        watch:{\n            currentMenu:function (oldVal,newVal) {\n                console.log(\"currentMenu change\");\n                for(var idx=0;idx<this.menuList.length;idx++){\n                    var item=this.menuList[idx];\n                    if(item.href==newVal.href){\n                        console.log(\"currentMenu change\");\n                        // this.menuList.splice(idx, 1, item);\n                    }\n                }\n            }\n        },\n        methods:{\n            parseMenuList:function(menuList){\n                //最初进入嵌套组件进行数据初始化\n                if(menuList.length&&!menuList[0].parent){\n                    for(var idx=0;idx<menuList.length;idx++){\n                        var item=menuList[idx];\n                        item.iconName=\"\";\n                        item.isOpen=false;\n                        if(item.subitems&&item.subitems.length){\n                            item.iconName=\"arrow\";\n                            this.parseMenuList(item.subitems);\n                        }\n                    }\n                }\n            },\n            //点击当前层触发\n            changeChapter:function (event,item) {\n                if(event.target.className.indexOf(\"active\")!=-1) return;\n\n                console.log(\"changeChapter\");\n               var labels = document.getElementsByClassName(\"bookmenu-label\");\n               for(var idx=0;idx<labels.length;idx++){\n                   labels[idx].className=\"bookmenu-label\";\n               }\n               if(event.target.className.indexOf(\"bookmenu-label\")!=-1)\n                   event.target.className=event.target.className+\" active\";\n               else\n                   event.target.parentElement.className=event.target.parentElement.className+\" active\";\n\n                this.$emit('change',item);\n            },\n            //监听传递子层\n            onChangeChapter:function(item){\n                this.$emit('change',item);\n            },\n            toggleMenu(item,idx){\n                if(item.isOpen){\n                    item.isOpen=false;\n                    item.iconName = 'arrow'\n                } else{\n                    item.isOpen=true;\n                    item.iconName = 'arrow-down'\n                }\n                //触发数组内容变动的监听\n                this.menuList.splice(idx, 1, item);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .menuList{\n        font-size: 14px;\n    }\n    .menuList .menuList{\n        padding-left: 20px;\n    }\n    .menuList .active{\n        color: red;\n    }\n    .bookmenu-icon{\n        display: inline-block;\n        width: 10%;\n    }\n    .bookmenu-label{\n        width: 90%;\n        display: inline-block;\n        overflow: hidden;\n        text-overflow:ellipsis;\n        white-space: nowrap;\n    }\n</style>"]}]}