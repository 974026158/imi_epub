{"remainingRequest":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\components\\bookmenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\src\\components\\bookmenu.vue","mtime":1577184796372},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\conta\\Documents\\IDEAProjects\\epub-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJ2YW50L2VzL2ljb24vc3R5bGUiOwppbXBvcnQgX0ljb24gZnJvbSAidmFudC9lcy9pY29uIjsKaW1wb3J0ICJ2YW50L2VzL2RpdmlkZXIvc3R5bGUiOwppbXBvcnQgX0RpdmlkZXIgZnJvbSAidmFudC9lcy9kaXZpZGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qKuazqOaEj2pxdWVyeemcgOimgeWcqHZ1Zee7hOS7tm1vdW505oyC6L29ZWzmoIfnrb7kuYvlkI7kvb/nlKjvvIzkuJRub2RlanPnjq/looPkuIvml6B3aW5kb3flr7nosaHvvIxicm93c2Vy546v5aKD5LiL5peg5omA6LCTKiovCmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKVnVlLnVzZShfSWNvbikudXNlKF9EaXZpZGVyKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJib29rbWVudSIsCiAgcHJvcHM6IHsKICAgIG1lbnVMaXN0OiBBcnJheSwKICAgIGN1cnJlbnRNZW51OiBPYmplY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51TGlzdExlbmd0aDogdGhpcy5tZW51TGlzdC5sZW5ndGgKICAgIH07CiAgfSwKICBiZWZvcmVNb3VudDogZnVuY3Rpb24gYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLnBhcnNlTWVudUxpc3QodGhpcy5tZW51TGlzdCk7CiAgfSwKICB3YXRjaDogewogICAgY3VycmVudE1lbnU6IGZ1bmN0aW9uIGN1cnJlbnRNZW51KG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjdXJyZW50TWVudSBjaGFuZ2UiKTsKICAgICAgJCgiW2l0ZW1IcmVmPSciICsgb2xkVmFsLmhyZWYgKyAiJ10iKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7CiAgICAgICQoIltpdGVtSHJlZj0nIiArIG5ld1ZhbC5ocmVmICsgIiddIikuYWRkQ2xhc3MoImFjdGl2ZSIpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcGFyc2VNZW51TGlzdDogZnVuY3Rpb24gcGFyc2VNZW51TGlzdChtZW51TGlzdCkgewogICAgICAvL+acgOWInei/m+WFpeW1jOWll+e7hOS7tui/m+ihjOaVsOaNruWIneWni+WMlgogICAgICBpZiAobWVudUxpc3QubGVuZ3RoICYmICFtZW51TGlzdFswXS5wYXJlbnQpIHsKICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBtZW51TGlzdC5sZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IG1lbnVMaXN0W2lkeF07CiAgICAgICAgICBpdGVtLmljb25OYW1lID0gIiI7CiAgICAgICAgICBpdGVtLmlzT3BlbiA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpdGVtLnN1Yml0ZW1zICYmIGl0ZW0uc3ViaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgIGl0ZW0uaWNvbk5hbWUgPSAiYXJyb3ciOwogICAgICAgICAgICB0aGlzLnBhcnNlTWVudUxpc3QoaXRlbS5zdWJpdGVtcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy/ngrnlh7vlvZPliY3lsYLop6blj5EKICAgIGNoYW5nZUNoYXB0ZXI6IGZ1bmN0aW9uIGNoYW5nZUNoYXB0ZXIoaXRlbSkgewogICAgICBjb25zb2xlLmxvZygiY2hhbmdlQ2hhcHRlciIpOwogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBpdGVtKTsKICAgIH0sCiAgICAvL+ebkeWQrOS8oOmAkuWtkOWxggogICAgb25DaGFuZ2VDaGFwdGVyOiBmdW5jdGlvbiBvbkNoYW5nZUNoYXB0ZXIoaXRlbSkgewogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCBpdGVtKTsKICAgIH0sCiAgICB0b2dnbGVNZW51OiBmdW5jdGlvbiB0b2dnbGVNZW51KGl0ZW0sIGlkeCkgewogICAgICBpZiAoaXRlbS5pc09wZW4pIHsKICAgICAgICBpdGVtLmlzT3BlbiA9IGZhbHNlOwogICAgICAgIGl0ZW0uaWNvbk5hbWUgPSAnYXJyb3cnOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0uaXNPcGVuID0gdHJ1ZTsKICAgICAgICBpdGVtLmljb25OYW1lID0gJ2Fycm93LWRvd24nOwogICAgICB9IC8v6Kem5Y+R5pWw57uE5YaF5a655Y+Y5Yqo55qE55uR5ZCsCgoKICAgICAgdGhpcy5tZW51TGlzdC5zcGxpY2UoaWR4LCAxLCBpdGVtKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["bookmenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAeA;AACA,OAAA,CAAA,MAAA,QAAA;AACA,OAAA,GAAA,MAAA,KAAA;AAGA,GAAA,CAAA,GAAA,QAAA,GAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,KADA;AAEA,IAAA,WAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,KAAA,QAAA,CAAA;AADA,KAAA;AAGA,GAVA;AAWA,EAAA,WAXA,yBAWA;AACA,SAAA,aAAA,CAAA,KAAA,QAAA;AACA,GAbA;AAcA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA,qBAAA,MAAA,EAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,oBAAA;AACA,MAAA,CAAA,CAAA,gBAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,CAAA,WAAA,CAAA,QAAA;AACA,MAAA,CAAA,CAAA,gBAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,CAAA,QAAA,CAAA,QAAA;AACA;AALA,GAdA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,aAAA,EAAA,uBAAA,QAAA,EAAA;AACA;AACA,UAAA,QAAA,CAAA,MAAA,IAAA,CAAA,QAAA,CAAA,CAAA,CAAA,CAAA,MAAA,EAAA;AACA,aAAA,IAAA,GAAA,GAAA,CAAA,EAAA,GAAA,GAAA,QAAA,CAAA,MAAA,EAAA,GAAA,EAAA,EAAA;AACA,cAAA,IAAA,GAAA,QAAA,CAAA,GAAA,CAAA;AACA,UAAA,IAAA,CAAA,QAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,KAAA;;AACA,cAAA,IAAA,CAAA,QAAA,IAAA,IAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,YAAA,IAAA,CAAA,QAAA,GAAA,OAAA;AACA,iBAAA,aAAA,CAAA,IAAA,CAAA,QAAA;AACA;AACA;AACA;AACA,KAdA;AAeA;AACA,IAAA,aAAA,EAAA,uBAAA,IAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,KAnBA;AAoBA;AACA,IAAA,eAAA,EAAA,yBAAA,IAAA,EAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,KAvBA;AAwBA,IAAA,UAxBA,sBAwBA,IAxBA,EAwBA,GAxBA,EAwBA;AACA,UAAA,IAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,CAAA,MAAA,GAAA,KAAA;AACA,QAAA,IAAA,CAAA,QAAA,GAAA,OAAA;AACA,OAHA,MAGA;AACA,QAAA,IAAA,CAAA,MAAA,GAAA,IAAA;AACA,QAAA,IAAA,CAAA,QAAA,GAAA,YAAA;AACA,OAPA,CAQA;;;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA,EAAA,IAAA;AACA;AAlCA;AArBA,CAAA","sourcesContent":["<template>\n    <div class=\"menuList\">\n        <van-divider/>\n        <div class=\"bookmenuItem\" v-for=\"(item,index) in menuList\" :key=\"item.name\">\n            <span class=\"bookmenu-icon\"><van-icon v-bind:name=\"item.subitems.length?item.iconName:''\" @click=\"toggleMenu(item,index)\"/></span>\n            <span class=\"bookmenu-label\" v-bind:itemHref=\"item.href\" @click=\"changeChapter(item)\">\n                <span>{{item.label}}</span>\n            </span>\n            <bookmenu v-show=\"item.subitems.length&&item.isOpen\" v-bind:menuList=\"item.subitems\" @change=\"onChangeChapter\"></bookmenu>\n            <van-divider v-if=\"index!=menuListLength-1\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n    /**注意jquery需要在vue组件mount挂载el标签之后使用，且nodejs环境下无window对象，browser环境下无所谓**/\n    import $ from \"jquery\";\n    import Vue from 'vue';\n    import { Icon,Divider  } from 'vant';\n\n    Vue.use(Icon).use(Divider);\n\n    export default {\n        name: \"bookmenu\",\n        props:{\n            menuList:Array,\n            currentMenu:Object\n        },\n        data(){\n            return{\n                menuListLength:this.menuList.length\n            }\n        },\n        beforeMount(){\n            this.parseMenuList(this.menuList);\n        },\n        watch:{\n            currentMenu:function (newVal,oldVal) {\n                console.log(\"currentMenu change\");\n                $(\"[itemHref='\"+oldVal.href+\"']\").removeClass(\"active\");\n                $(\"[itemHref='\"+newVal.href+\"']\").addClass(\"active\");\n            }\n        },\n        methods:{\n            parseMenuList:function(menuList){\n                //最初进入嵌套组件进行数据初始化\n                if(menuList.length&&!menuList[0].parent){\n                    for(var idx=0;idx<menuList.length;idx++){\n                        var item=menuList[idx];\n                        item.iconName=\"\";\n                        item.isOpen=false;\n                        if(item.subitems&&item.subitems.length){\n                            item.iconName=\"arrow\";\n                            this.parseMenuList(item.subitems);\n                        }\n                    }\n                }\n            },\n            //点击当前层触发\n            changeChapter:function (item) {\n                console.log(\"changeChapter\");\n                this.$emit('change',item);\n            },\n            //监听传递子层\n            onChangeChapter:function(item){\n                this.$emit('change',item);\n            },\n            toggleMenu(item,idx){\n                if(item.isOpen){\n                    item.isOpen=false;\n                    item.iconName = 'arrow'\n                } else{\n                    item.isOpen=true;\n                    item.iconName = 'arrow-down'\n                }\n                //触发数组内容变动的监听\n                this.menuList.splice(idx, 1, item);\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .menuList{\n        font-size: 14px;\n    }\n    .menuList .menuList{\n        padding-left: 20px;\n    }\n    .menuList .active{\n        color: red;\n    }\n    .bookmenu-icon{\n        display: inline-block;\n        width: 10%;\n    }\n    .bookmenu-label{\n        width: 90%;\n        display: inline-block;\n        overflow: hidden;\n        text-overflow:ellipsis;\n        white-space: nowrap;\n    }\n</style>"],"sourceRoot":"src/components"}]}